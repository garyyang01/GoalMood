# 功能規格：團隊每日目標與心情追蹤器

**功能分支**: `001-goal-mood-tracker`
**建立日期**: 2025-11-19
**狀態**: 草稿
**輸入**: 使用者描述：「參考 Documentation/# 2025 Technical Review - TC and Designe.md」

## 澄清事項

### 會議 2025-11-19

- Q: 當新的一天開始時，前一天的目標應該如何處理？ → A: 保留前一天的目標但標記為歷史資料（僅顯示今日）
- Q: 當兩個使用者同時更新同一個團隊成員的心情或目標時，系統應該如何處理？ → A: 最後寫入勝出（不檢測衝突，最後提交的更新覆蓋前一個）
- Q: 目標描述應該有多長的字元限制？ → A: 500 字元限制
- Q: 團隊成員姓名應該有多長的字元限制？ → A: 50 字元限制
- Q: 當使用者刪除目標時，是否需要確認提示？ → A: 需要確認（顯示對話框要求使用者確認刪除）

## 使用者情境與測試 *(必填)*

### 使用者故事 1 - 檢視團隊儀表板 (優先級：P1)

團隊成員開啟應用程式後，立即看到整個團隊的當前狀態：誰正在處理哪些今日目標、每個人的心情如何。這提供了團隊工作負載和士氣的即時可見性。

**優先級理由**：這是核心價值主張 - 讓團隊一目了然地看到每日目標和團隊士氣。沒有這個功能，應用程式就沒有任何價值。

**獨立測試**：可以透過載入應用程式並驗證所有團隊成員都顯示其姓名、當前心情和今日目標來完整測試。立即提供團隊狀態可見性的價值。

**驗收情境**：

1. **假設** 開啟應用程式，**當** 使用者檢視儀表板，**則** 所有團隊成員以個別卡片形式顯示
2. **假設** 團隊成員有今日目標，**當** 檢視儀表板，**則** 每個成員的卡片顯示其目標清單及完成狀態（例如「已完成 2/3」）
3. **假設** 團隊成員已設定心情，**當** 檢視儀表板，**則** 每個成員的卡片顯示其當前心情表情符號（😀 😊 😐 😞 😤）
4. **假設** 團隊成員沒有目標，**當** 檢視其卡片，**則** 卡片顯示「今日無目標」或空白目標清單
5. **假設** 團隊成員尚未設定心情，**當** 檢視其卡片，**則** 顯示預設或中性心情指示器

---

### 使用者故事 2 - 新增每日目標 (優先級：P2)

團隊成員或團隊領導需要在一天開始或出現新任務時為團隊成員新增目標。他們可以透過選擇團隊成員並輸入目標描述來快速新增目標。

**優先級理由**：沒有新增目標的能力，追蹤器就無法追蹤任何事物。這對於應用程式超越唯讀顯示功能是必要的。

**獨立測試**：可以透過使用「新增目標」表單為不同團隊成員建立新目標並驗證它們出現在儀表板上來獨立測試。為任務規劃提供獨立價值。

**驗收情境**：

1. **假設** 顯示新增目標表單，**當** 使用者從下拉選單選擇團隊成員並輸入目標描述，**則** 新目標出現在該成員的儀表板卡片中
2. **假設** 已新增目標，**當** 檢視儀表板，**則** 目標預設顯示為未完成（未勾選）
3. **假設** 為一個成員新增多個目標，**當** 檢視其卡片，**則** 所有目標按新增順序列出
4. **假設** 使用者嘗試新增目標但未選擇團隊成員，**當** 提交表單，**則** 顯示錯誤訊息要求選擇團隊成員
5. **假設** 使用者嘗試新增空白描述的目標，**當** 提交表單，**則** 顯示錯誤訊息要求輸入目標描述
6. **假設** 使用者點擊目標的刪除按鈕，**當** 系統顯示確認對話框且使用者確認，**則** 目標從儀表板移除且統計資料更新

---

### 使用者故事 3 - 更新團隊成員心情 (優先級：P3)

團隊成員可以表達他們當天的感受，讓團隊了解誰可能需要支援或誰過得很好。這有助於建立團隊意識和同理心。

**優先級理由**：心情追蹤是本應用程式的關鍵差異化功能，在任務追蹤之外提供團隊情緒意識。這對「士氣監控」價值主張至關重要。

**獨立測試**：可以透過使用「更新心情」表單變更團隊成員心情並驗證心情表情符號在儀表板上更新來獨立測試。為團隊士氣可見性提供獨立價值。

**驗收情境**：

1. **假設** 顯示更新心情表單，**當** 使用者選擇團隊成員並選擇心情表情符號（😀 😊 😐 😞 😤），**則** 所選心情出現在該成員的儀表板卡片上
2. **假設** 成員已設定心情，**當** 更新其心情，**則** 先前的心情被新心情取代
3. **假設** 使用者嘗試更新心情但未選擇團隊成員，**當** 提交表單，**則** 顯示錯誤訊息要求選擇團隊成員
4. **假設** 使用者嘗試更新心情但未選擇心情表情符號，**當** 提交表單，**則** 顯示錯誤訊息要求選擇心情

---

### 使用者故事 4 - 標記目標為完成 (優先級：P4)

當團隊成員在一天中完成目標時，他們或其團隊領導可以標記目標為完成。這提供進度和成就感。

**優先級理由**：任務完成追蹤對目標管理至關重要，但即使沒有此功能，應用程式仍提供價值（可見性）。它增強但不啟用核心功能。

**獨立測試**：可以透過勾選目標完成核取方塊並驗證完成計數更新來獨立測試。為進度追蹤提供獨立價值。

**驗收情境**：

1. **假設** 儀表板上顯示目標，**當** 使用者點擊目標旁的核取方塊，**則** 目標被標記為完成（已勾選）
2. **假設** 目標被標記為完成，**當** 檢視成員卡片，**則** 完成計數更新（例如從「1/3」變為「2/3」）
3. **假設** 已完成的目標，**當** 使用者取消勾選核取方塊，**則** 目標回復為未完成狀態且計數相應更新
4. **假設** 成員的所有目標都已完成，**當** 檢視其卡片，**則** 完成計數顯示 100%（例如「3/3」）

---

### 使用者故事 5 - 檢視團隊統計資料 (優先級：P5)

團隊領導和成員想要一目了然地看到整體團隊績效和士氣趨勢。統計面板提供團隊完成率和心情分布的快速洞察。

**優先級理由**：統計資料提供額外洞察，但對每日目標追蹤不是必需的。應用程式在沒有匯總指標的情況下仍能提供核心價值。

**獨立測試**：可以透過檢視統計面板並驗證它顯示準確的團隊完成百分比和心情分布計數來獨立測試。為團隊績效洞察提供獨立價值。

**驗收情境**：

1. **假設** 顯示儀表板，**當** 檢視統計面板，**則** 它顯示團隊目標完成百分比（例如「已完成 65%」）
2. **假設** 團隊成員已設定心情，**當** 檢視統計面板，**則** 它顯示心情分布計數（例如「3 人開心，2 人中性，1 人壓力」）
3. **假設** 目標被標記為完成或未完成，**當** 檢視統計面板，**則** 完成百分比即時更新
4. **假設** 心情被更新，**當** 檢視統計面板，**則** 心情分布計數即時更新
5. **假設** 不存在目標，**當** 檢視統計面板，**則** 它顯示「已完成 0%」或「無追蹤目標」

---

### 邊界情況

- **當團隊成員有超過 10 個目標時**：目標清單顯示垂直捲動，無分頁或截斷限制
- **當目標描述接近或達到 500 字元上限時**：顯示完整文字內容，UI 使用自動換行處理，不截斷
- **當團隊成員姓名接近或達到 50 字元上限或包含特殊字元時**：顯示完整姓名，必要時使用換行，支援所有 Unicode 字元
- **當團隊成員從未設定心情時**：系統顯示預設中性心情表情符號 😐
- **當所有團隊成員都已完成所有目標時**：顯示 100% 完成徽章（例如「3/3」），無特殊慶祝動畫或效果
- **當系統中不存在團隊成員時**：顯示空白狀態訊息「尚無團隊成員資料」
- **當多個使用者同時編輯同一項資料時**：最後提交的更新覆蓋先前的更新，無衝突檢測或提示訊息（依據澄清事項第 2 點）

## 需求 *(必填)*

### 功能需求

- **FR-001**：系統必須在儀表板視圖中以個別卡片顯示所有團隊成員，每張卡片包含姓名、當前心情表情符號和目標清單
- **FR-002**：系統必須顯示每個團隊成員的目標完成計數（例如「已完成 2/3」）
- **FR-003**：系統必須提供新增目標的表單，包含團隊成員選擇下拉選單和目標描述文字輸入
- **FR-004**：系統必須提供更新團隊成員心情的表單，包含團隊成員選擇下拉選單和心情表情符號選擇器（😀 😊 😐 😞 😤）
- **FR-005**：系統必須允許使用者透過儀表板上的核取方塊標記目標為完成
- **FR-006**：系統必須允許使用者取消勾選已完成的目標以將其回復為未完成狀態
- **FR-007**：系統必須顯示統計面板，顯示團隊目標完成百分比
- **FR-008**：系統必須在統計面板中顯示心情分布計數（每種心情類型的計數）
- **FR-009**：系統必須持久化團隊成員、目標和心情，使資料在應用程式重啟後仍然存在
- **FR-010**：系統必須在目標被標記為完成/未完成時即時更新完成計數和統計資料
- **FR-011**：系統必須在心情變更時即時更新心情顯示
- **FR-012**：系統必須在新增目標時驗證已選擇團隊成員
- **FR-013**：系統必須在新增目標時驗證目標描述不為空且不超過 500 字元
- **FR-014**：系統必須在更新心情時驗證已選擇團隊成員
- **FR-015**：系統必須在更新心情時驗證已選擇心情表情符號
- **FR-016**：系統必須按新增順序顯示目標
- **FR-017**：系統必須預設將目標關聯到今天的日期（目標是每日的）
- **FR-018**：系統必須支援從團隊成員卡片刪除目標，並在刪除前顯示確認對話框
- **FR-019**：系統必須在不存在目標或團隊成員時顯示適當的空白狀態訊息（依據邊界情況）
- **FR-020**：系統必須保留所有歷史目標資料（包括前幾天的目標）在資料庫中，但在儀表板查詢時使用建立日期過濾僅顯示今日目標（WHERE CreatedDate = TODAY()）
- **FR-021**：系統必須在目標實體中記錄建立日期，以區分今日目標與歷史目標
- **FR-022**：系統必須採用最後寫入勝出策略處理併發更新，不實作衝突檢測或樂觀鎖定機制（資料庫層級的最後寫入自然勝出）
- **FR-023**：系統必須驗證團隊成員姓名不為空且不超過 50 字元

### 關鍵實體

- **TeamMember（團隊成員）**：代表團隊中的個人。關鍵屬性包括唯一識別碼、姓名（最大 50 字元）和當前心情狀態（列舉值，五種選項之一：😀 開心、😊 滿足、😐 中性、😞 悲傷、😤 壓力）。心情作為團隊成員的屬性儲存，預設值為中性。

- **Goal（目標）**：代表分配給團隊成員的每日任務或目標。關鍵屬性包括唯一識別碼、描述文字（最大 500 字元）、完成狀態（完成/未完成）、關聯的團隊成員（外鍵）和建立日期（預設為今天）。

## 成功標準 *(必填)*

### 可衡量結果

- **SC-001**：使用者可以在開啟應用程式後 2 秒內檢視完整的團隊狀態（所有成員卡片、目標清單和心情表情符號全部載入並顯示）
- **SC-002**：使用者可以在 10 秒內完成新增目標的完整流程（從開啟表單、填寫資料、提交到在儀表板上看到新目標）
- **SC-003**：使用者可以在 5 秒內完成更新心情的完整流程（從開啟表單、選擇心情、提交到在儀表板上看到更新的心情表情符號）
- **SC-004**：使用者可以透過單次互動（一次點擊核取方塊）標記目標為完成，無需額外確認步驟
- **SC-005**：應用程式正確計算並顯示完成百分比，使用小數點後兩位四捨五入（例如：3 個目標中的 2 個顯示為「66.67%」）
- **SC-006**：統計面板在任何目標完成狀態或心情變更後 1 秒內反映最新數據
- **SC-007**：100% 的資料持久化 - 所有目標、心情和團隊成員資料在應用程式重新啟動後完整保留
- **SC-008**：應用程式在處理 10 個團隊成員時，所有操作（載入、新增、更新）的回應時間與處理 1 個成員時相同
- **SC-009**：應用程式在處理總共 50 個目標時，所有操作的回應時間與處理 10 個目標時相同
- **SC-010**：表單驗證錯誤在使用者觸發提交後 200 毫秒內顯示（即時回饋）

## 假設

- 團隊成員在系統中預先配置（此功能中不包含團隊成員註冊/管理）
- 應用程式儀表板僅顯示今日目標，但系統保留歷史資料以供未來查詢或除錯
- 任何團隊成員都可以為任何其他團隊成員新增目標（無基於角色的權限）
- 任何團隊成員都可以更新任何其他團隊成員的心情（無驗證或個人所有權）
- 目標由使用者手動刪除（無自動刪除機制）
- 併發更新採用最後寫入勝出策略，不實作衝突檢測或樂觀鎖定（適合小型團隊使用情境）
- 應用程式在桌面瀏覽器上使用（不需要行動響應式設計）
- 應用程式適用於小型團隊（根據成功標準，10 人或更少）
- 歷史目標資料保留策略由系統管理員在未來決定（不在此 MVP 範圍內）
- 可用網路連線（不需要離線模式）
- 僅支援現代瀏覽器（Chrome、Firefox、Safari、Edge 最近 2 個版本）

## 範圍外

以下功能明確排除在此規格之外：

- 使用者驗證和登入系統
- 多日目標歷史或趨勢分析
- 詳細的心情分析、圖表或歷史心情追蹤
- 電子郵件或推播通知
- 團隊成員管理的管理控制（新增/移除成員）
- 目標編輯功能（僅新增、完成、刪除）
- 重複性目標或目標範本
- 目標類別、標籤或優先級
- 響應式行動設計（僅桌面）
- 深色模式或主題自訂
- 個人檔案頁面
- 目標的評論或備註
- 目標分配工作流程或核准流程
- 時間追蹤或預估完成時間
- 與外部工具的整合（Slack、行事曆等）
